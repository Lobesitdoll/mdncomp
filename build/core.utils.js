"use strict";const utils={buildTable:e=>{const r=[];return utils.listTopLevels(e).filter(e=>"browsers"!==e).forEach(t=>(function e(t,o,i){const a=t[o];"object"==typeof a&&Object.keys(a).forEach(t=>{"__compat"!==t&&"worker_support"!==t&&"SharedArrayBuffer_as_param"!==t&&(r.push(i+"."+t),e(a,t,i+"."+t))})})(e,t,t)),r},listTopLevels:e=>{let r=Object.keys(e),t=r.indexOf("browsers");return t>=0&&r.splice(t,1),r},getComparer:(e,r,t)=>{let o,i,a="",s="";e.startsWith("/")?(e=(i=(e=e.substr(1)).split("/"))[0],a=i[1]||""):r?e=function(e){const r=[];let t="";e.endsWith(".")&&(t="$",e=e.substr(0,e.length-1));for(let t of e)r.push("\\^$.*+?()[]{}|".includes(t)?"\\"+t:t);return r.join(".*?")+t}(e.toLowerCase()):(e.endsWith(".")&&(e=e.substr(0,e.length-1),s="$"),e.startsWith("*")||(e="*"+e),e.endsWith("*")||s.length||(e+="*"),e=e.split("*").join(".*")+s),t&&!a.includes("i")&&(a+="i");try{o=new RegExp(e,a)}catch(e){utils.err(errText.invalidRegex),process.exit()}return o},getPathAsObject:(e,r)=>{let t=e;return r.split(".").forEach(e=>{t&&t[e]&&(t=t[e])}),t},nameFromPath:e=>{let r=utils.getExt(e);return r.length?r:e},getExt:e=>{let r=e.lastIndexOf(".")+1;return r?e.substr(r):""},prePathFromPath:(e,r)=>{let t=r.split("."),o=e,i="";return t.pop(),t.forEach(e=>{o&&(o[e].__compat&&(i+=e+"."),o=o[e])}),i.length<2&&((t=r.split(".")).pop(),i=t.join(".")+"."),i.length>1?i:""},isCompat:(e,r)=>{let t=utils.getPathAsObject(e,r);return t&&"object"==typeof t.__compat},hasChildren:e=>{const r=Object.keys(e);for(let t of r)if(e[t].__compat)return!0;return!1},getBrowserList:()=>({desktop:["chrome","edge","firefox","ie","opera","safari"],mobile:["chrome_android","edge_mobile","firefox_android","opera_android","safari_ios","webview_android"],ext:["nodejs","qq_android","samsunginternet_android","uc_android","uc_chinese_android"]}),getBrowserLongNames:()=>({chrome:"Chrome",edge:"Edge",firefox:"Firefox",ie:"IE",opera:"Opera",safari:"Safari",chrome_android:"Chrome/A",edge_mobile:"Edge/mob",firefox_android:"Firefox/A",opera_android:"Opera/A",safari_ios:"Safari/iOS",webview_android:"Webview/A",nodejs:"Node JS",qq_android:"QQ/A",samsunginternet_android:"Samsung/A",uc_android:"UC/A",uc_chinese_android:"UC-Ch/A"}),getBrowserShortNames:()=>({chrome:"C",edge:"E",firefox:"F",ie:"IE",opera:"O",safari:"S",chrome_android:"ca",edge_mobile:"em",firefox_android:"fa",opera_android:"oa",safari_ios:"si",webview_android:"wa",nodejs:"ND",qq_android:"QQ",samsunginternet_android:"SM",uc_android:"UC",uc_chinese_android:"UCC"}),getFeatureName:e=>("worker_support"===e?e=text.workerSupport:"SharedArrayBuffer_as_param"===e&&(e=text.sabSupport),e),cleanHTML:(e,r,t,o,i)=>(o=o||ANSI.cyan,t=t||ANSI.reset,i=i||o,e=e.replace(/<code>/gi,o).replace(/<\/code>/gi,t).replace(/<a href/gi,i+"<a href").replace(/<\/a>/gi,"</a>"+t).replace(/(<([^>]+)>)/gi,""),r&&(e=e.replace(/&lt;/gi,"<").replace(/&gt;/gi,">")),e),breakAnsiLine:(e,r)=>{const t=Math.max(72,r>>>0);let o,i=[],a=0,s=0,n=-1,l=!1,d=!1,c=0;for(;o=e[c];)l&&d&&!"rgyobmpcwGR".includes(o)&&(l=!1),l?("m"===o||d)&&(l=!1):""===o||"?"===o?(l=!0,d="?"===o):(" "!==o&&"\n"!==o||(n=c),++a!==t&&"\n"!==o||(n<0&&(n=c),i.push(e.substring(s,n).trim()),s=n,n=-1,a=c-s)),c++;return a&&i.push(e.substr(s)),(i=i.map(e=>e.trim())).length?i.join(lf):""},ansiLength:e=>utils.ansiFree(e).length,ansiFree:e=>e.replace(/\x1b[^m]*m/g,"").replace(/\?[rgyobmpcwGR]/g,""),parseColorCodes:e=>{const r={r:ANSI.red,g:ANSI.green,y:ANSI.yellow,o:ANSI.orange,b:ANSI.blue,m:ANSI.magenta,p:ANSI.purple,c:ANSI.cyan,w:ANSI.white,G:ANSI.gray,R:ANSI.reset};let t="",o=0,i=0;do{if((o=e.indexOf("?",o))>=0){t+=e.substring(i,o);let a=r[e[o+1]];"string"==typeof a?(t+=a,o++):t+=e[o],i=++o}else t+=e.substr(i)}while(o>=0);return t},entities:e=>{const r={"&nbsp;":" ","&quot;":'"',"&amp;":"&","&lt;":"<","&gt;":">"},t=new RegExp(Object.keys(r).join("|"),"gmi");return e.replace(t,e=>r[e])},versionAddRem:(e,r)=>{let t="";return null===e&&null===r?t="?r?":null===e||void 0===e?t="?r-":"boolean"==typeof e?t=e?"?g"+text.yes:"?r-":"string"==typeof e&&(t=(r?"?r":"?g")+e,r&&(t+="boolean"==typeof r?"-?":"-"+r)),t},loadMDN:function(){let e;try{e=require("../data/data.json")}catch(e){utils.err(`?r${errText.criticalDataFile}?R`),process.exit()}return e},log:function(...e){1===e.length&&Array.isArray(e[0])&&(e[0]=e[0].join(lf)),console.log(utils.parseColorCodes(e.join(" ")))},err:function(...e){console.error(utils.parseColorCodes(e.join(" ")))}};module.exports=utils;