/*!
  Config file module
  Copyright (c) 2018 Epistemex
  www.epistemex.com
*/
"use strict";require("json5/lib/register");const ANSI=global.ANSI,fs=require("fs"),path=require("path"),filePath=path.resolve(global.loadModule("core.io").getConfigDataPath(),".config.json"),filePath5=filePath+"5";function loadConfig(e){try{fs.existsSync(filePath)&&(fs.renameSync(filePath,filePath5),console.log(`${ANSI.green}NOTE: renamed config-file from '.config.json' to '.config.json5'.${ANSI.reset}`))}catch(e){console.log(`${ANSI.red}Unable to rename ".config.json" to ".config.json5".${ANSI.reset}\n${e}`)}try{let t=require(filePath5),r=Object.assign({},t.options),n=Object.assign({},t.formatter);s(r.fuzzy)&&(e.fuzzy=r.fuzzy),s(r.colors)&&(e.colors=r.colors),s(r.notes)&&(e.notes=r.notes),s(r.noteEnd)&&(e.noteEnd=r.noteEnd),s(r.shorthand)&&(e.shorthand=r.shorthand),s(r.split)&&(e.split=r.split),s(r.caseSensitive)&&(e.caseSensitive=r.caseSensitive),s(r.desktop)&&(e.desktop=r.desktop),s(r.mobile)&&(e.mobile=r.mobile),s(r.overwrite)&&(e.overwrite=r.overwrite),s(r.markdown)&&(e.markdown=r.markdown),"number"==typeof r.maxChars&&(e.maxChars=Math.max(0,0|r.maxChars)),s(r.doc)&&(e.doc=r.doc),s(r.docforce)&&(e.docforce=r.docforce),s(r.ext)&&(e.ext=r.ext),s(r.desc)&&(e.desc=r.desc),s(r.specs)&&(e.specs=r.specs),s(r.waitkey)&&(e.waitkey=r.waitkey),s(r.workers)&&(e.workers=r.workers),s(r.sab)&&(e.sab=r.sab),n.long&&n.long.sepChar&&"string"==typeof n.long.sepChar&&1===n.long.sepChar.length&&(o=n.long.sepChar,' abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_|+*{}[];:!"#&/()=?\\.,'.includes(o))&&(global.sepChar=n.long.sepChar)}catch(e){}var o;function s(e){return"boolean"==typeof e}}module.exports=loadConfig;