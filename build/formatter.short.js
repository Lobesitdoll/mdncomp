const utils=loadModule("core.utils"),table=loadModule("core.table"),browserNames=utils.getBrowserNames(),tblOptions={align:["l"],delimiter:char.sep,stringLength:utils.ansiLength};let hasNotes=!1,hasFlags=!1;function formatterShort(e){const t=[];log(`${lf}?c${e.prePath}?w${e.name}  ${function(){if(e.path.startsWith("webextensions"))return"";let t=[];e.standard&&t.push(`?g${text.standardShort}?R`);e.experimental&&t.push(`?y${text.experimentalShort}?R`);e.deprecated&&t.push(`?r${text.deprecatedShort}?R`);t.length||t.push(`?r${text.nonStandardShort}?R`);return t.length?"?G["+t.join(", ")+"?G]?R":"?R"}()}?R`),e.url&&log("?G"+e.url+"?R");const s=["?y"+text.hdrBrowsers];if(options.desktop&&e.browsers.desktop.length&&s.push(...o("desktop","?w")),options.mobile&&e.browsers.mobile.length&&s.push(...o("mobile","?c")),options.ext&&e.browsers.ext.length&&s.push(...o("ext","?y")),s[s.length-1]+="?G",t.push(s),t.push(...function(){const t=[];t.push(n(e.name,e.browsers,"?w")),options.children&&e.children.length&&e.children.forEach(s=>{let o=s.name;s.name===e.name&&(o+="()"),s.standard||s.experimental||s.deprecated||(o="?G-"+o+"?R"),t.push(n(o,s.browsers,"?R",!0))});return t}()),log(lf+table(t,tblOptions)),!options.expert){const e=[];e.push(`?c${char.notes}?R) ${text.someNotesHint}`),e.push(`?c${char.flags}?R) ${text.someFlagsHint}`),log(e.join(", ")),e.length&&log(text.someHints+lf)}function o(t,s="?w"){const o=e.browsers[t];return o.map((e,t)=>s+browserNames[e.browser].short.padEnd(3)+(t===o.length-1?"?w":"?G"))}function n(e,t,s="?R",o=!1){const n=[s+utils.getFeatureName(e)];return options.desktop&&n.push(...r(t.desktop,o)),options.mobile&&n.push(...r(t.mobile,o)),options.ext&&n.push(...r(t.ext,o)),n}function r(e,t=!1){const s=[];return e.forEach((o,n)=>{const r=o.history[0];let l=utils.versionAddRem(r.version_added,r.version_removed,o.noteIndex.length>0);o.noteIndex.length&&(hasNotes=!0,l+="?c"+char.notes),l+=n===e.length-1?"?w":"?G",r.flags&&r.flags.length&&(hasFlags=!0,l+=(t?"?m":"?b")+char.flags+"?G"),s.push(l)}),s}}module.exports=formatterShort;