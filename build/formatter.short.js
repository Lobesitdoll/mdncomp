const utils=loadModule("core.utils"),table=loadModule("core.table"),browserNames=utils.getBrowserNames(),tblOptions={align:["l"],delimiter:char.sep,stringLength:utils.ansiLength};function formatterShort(e){const t=[];let o=!1,s=!1;log(`${lf}?c${e.prePath}?w${e.name}  ${function(){if(e.path.startsWith("webextensions"))return"";const t=[];e.standard&&t.push(`?g${text.standardShort}?R`);e.experimental&&t.push(`?y${text.experimentalShort}?R`);e.deprecated&&t.push(`?r${text.deprecatedShort}?R`);t.length||t.push(`?r${text.nonStandardShort}?R`);return t.length?`?G[${t.join(", ")}?G]?R`:"?R"}()}?R`),e.url&&log(`?G${e.url}?R`);const n=["?y"+text.hdrBrowsers];if(options.desktop&&e.browsers.desktop.length&&n.push(...r("desktop","?w")),options.mobile&&e.browsers.mobile.length&&n.push(...r("mobile","?c")),options.ext&&e.browsers.ext.length&&n.push(...r("ext","?y")),n[n.length-1]+="?G",t.push(n),t.push(...function(){const t=[];t.push(l(e.name,e.browsers,"?w")),options.children&&e.children.length&&e.children.forEach(o=>{let s=o.name;o.name===e.name&&(s+="()"),o.standard||o.experimental||o.deprecated||(s="?G"+char.deprecated+s),t.push(l(s+"?w",o.browsers,"?R"))});return t}()),log(lf+table(t,tblOptions)),options.expert<2){const e=[];o&&e.push(`?c${char.notes}?R) ${text.someNotesHint}`),s&&e.push(`?c${char.flags}?R) ${text.someFlagsHint}`),e.length&&(log(e.join(", ")),log(text.someHints+lf))}function r(t,o="?w"){const s=e.browsers[t];return s.map((e,t)=>o+browserNames[e.browser].short.padEnd(3)+(t===s.length-1?"?w":"?G"))}function l(e,t,o="?R"){const s=[o+e];return options.desktop&&s.push(...h(t.desktop)),options.mobile&&s.push(...h(t.mobile)),options.ext&&s.push(...h(t.ext)),s}function h(e){const t=[];return e.forEach((n,r)=>{const l=n.history[0];let h=utils.versionAddRem(l.version_added,l.version_removed,n.noteIndex.length>0);n.noteIndex.length&&(o=!0,h+="?c"+char.notes),h+=r===e.length-1?"?w":"?G",l.flags&&l.flags.length&&(s=!0,h+="?m"+char.flags+"?G"),t.push(h)}),t}}module.exports=formatterShort;