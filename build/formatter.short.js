const utils=loadModule("core.utils"),table=loadModule("core.table"),browserNames=utils.getBrowserNames(),tblOptions={align:["l"],delimiter:char.sep,stringLength:utils.ansiLength};function formatterShort(e){const t=[];let s=!1,o=!1;log(`${lf}?c${e.prePath}?w${e.name}  ${function(){if(e.path.startsWith("webextensions"))return"";const t=[];e.standard&&t.push(`?g${text.standardShort}?R`);e.experimental&&t.push(`?y${text.experimentalShort}?R`);e.deprecated&&t.push(`?r${text.deprecatedShort}?R`);t.length||t.push(`?r${text.nonStandardShort}?R`);return t.length?`?G[${t.join(", ")}?G]?R`:"?R"}()}?R`),e.url&&log(`?G${e.url}?R`);const n=["?y"+text.hdrBrowsers];if(options.desktop&&e.browsers.desktop.length&&n.push(...r("desktop","?w")),options.mobile&&e.browsers.mobile.length&&n.push(...r("mobile","?c")),options.ext&&e.browsers.ext.length&&n.push(...r("ext","?y")),n[n.length-1]+="?G",t.push(n),t.push(...function(){const t=[];t.push(l(e.name,e.browsers,"?w")),options.children&&e.children.length&&e.children.forEach(s=>{let o=s.name;s.name===e.name&&(o+="()"),s.standard||s.experimental||s.deprecated||(o="?G"+char.deprecated+o+"?R"),t.push(l(o,s.browsers,"?R",!0))});return t}()),log(lf+table(t,tblOptions)),!options.expert){const e=[];s&&e.push(`?c${char.notes}?R) ${text.someNotesHint}`),o&&e.push(`?c${char.flags}?R) ${text.someFlagsHint}`),e.length&&(log(e.join(", ")),log(text.someHints+lf))}function r(t,s="?w"){const o=e.browsers[t];return o.map((e,t)=>s+browserNames[e.browser].short.padEnd(3)+(t===o.length-1?"?w":"?G"))}function l(e,t,s="?R",o=!1){const n=[s+utils.getFeatureName(e)];return options.desktop&&n.push(...h(t.desktop,o)),options.mobile&&n.push(...h(t.mobile,o)),options.ext&&n.push(...h(t.ext,o)),n}function h(e,t=!1){const n=[];return e.forEach((r,l)=>{const h=r.history[0];let a=utils.versionAddRem(h.version_added,h.version_removed,r.noteIndex.length>0);r.noteIndex.length&&(s=!0,a+="?c"+char.notes),a+=l===e.length-1?"?w":"?G",h.flags&&h.flags.length&&(o=!0,a+=(t?"?m":"?b")+char.flags+"?G"),n.push(a)}),n}}module.exports=formatterShort;