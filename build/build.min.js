/*!
	mdncomp (version: see package.json)
	Copyright (c) 2018 Epistemex
	www.epistemex.com
*/
"use strict";module.exports=init;const ANSI={bright:"[1m",dim:"[2m",clrToCursor:"[1K",cursorUp:"[1A",black:"[30m",red:"[31;1m",green:"[32;1m",yellow:"[33;1m",blue:"[34;1m",magenta:"[35;2m",cyan:"[36;1m",white:"[37;1m",gray:"[30;1m",reset:"[0m"},lf="\r\n",yes="Y",no="-",yes16="âœ”",no16="âœ˜",saves=[],version=require("../package.json").version,args=process.argv,log=console.log.bind(console),urlPrefix="https://raw.githubusercontent.com/epistemex/data-for-mdncomp/master/",cfgPath=process.env.APPDATA||("darwin"===process.platform?process.env.HOME+"Library/Preferences":"/var/local");let mdn,cfg,crypto,options,isoLang="en-US",shortPad=1;function buildTable(){const e=[];return listTopLevels().forEach(t=>{"browsers"!==t&&function t(n,o,r){const s=n[o];"object"==typeof s&&Object.keys(s).forEach(n=>{"__compat"!==n&&(e.push(r+"."+n),t(s,n,r+"."+n))})}(mdn,t,t)}),e}function listTopLevels(){let e=Object.keys(mdn),t=e.indexOf("browsers");return t>=0&&e.splice(t,1),e}function listBrowsers(){return Object.keys(mdn.browsers)}function getComparer(e,t){let n,o,r="",s="";e.startsWith("/")?(e=(o=(e=e.substr(1)).split("/"))[0],r=o[1]):t?e=function(e){let t=[],n="";e.endsWith(".")&&(n="$",e=e.substr(0,e.length-1));for(let n of e)t.push("\\^$.*+?()[]{}|".includes(n)?"\\"+n:n);return t.join(".*?")+n}(e.toLowerCase()):(e.endsWith(".")&&(e=e.substr(0,e.length-1),s="$"),e.startsWith("*")||(e="*"+e),e.endsWith("*")||s.length||(e+="*"),e=e.split("*").join(".*")+s);try{n=new RegExp(e,r)}catch(e){log("Invalid regular expression:",e.message),process.exit(-1)}return n}function getPathAsObject(e,t){let n=e.split("."),o=mdn;return n.forEach(e=>{o&&o[e]&&(o=o[e])}),t&&Object.keys(o).forEach(e=>{o&&o[e].__compat&&delete o[e]}),o}function nameFromPath(e){let t=getExt(e);return t.length?t:e}function getExt(e){let t=e.lastIndexOf(".");return t<0?"":e.substr(++t)}function prePathFromPath(e){let t=e.split("."),n=mdn,o="";return t.pop(),t.forEach(e=>{n&&(n[e].__compat&&(o+=e+"."),n=n[e])}),o.length>1?o:""}function isCompat(e){let t=getPathAsObject(e);return!!t&&"object"==typeof t.__compat}function cleanHTML(e,t){return e=(e=e.replace(/<code>/gi,ANSI.cyan).replace(/<\/code>/gi,ANSI.white)).replace(/(<([^>]+)>)/gi,""),t&&(e=e.replace(/&lt;/gi,"<").replace(/&gt;/gi,">")),e}function breakAnsiLine(e,t){let n,o=[],r=0,s=0,i=0,a=-1,l=!1,h=Math.max(72,t>>>0||72);for(;n=e[r];)l?"m"===n&&(l=!1):""===n?l=!0:(" "!==n&&"\n"!==n||(a=r),++s!==h&&"\n"!==n||(a<0&&(a=r),o.push(e.substring(i,a).trim()),i=a,a=-1,s=r-i)),r++;return s&&o.push(e.substr(i)),o.forEach((e,t)=>{o[t]=e.trim()}),o.length?o.join(lf):""}function indent(e){let t="",n=0;for(let r of e)","===r||"{"===r?("{"===r&&n++,t+=r+o()):"}"===r?(n--,t+=o()+r):t+=":"===r?r+" ":r;function o(){return lf+"  ".repeat(n)}return t}function getMaxLength(e){let t=0;return e.forEach(e=>{let n=(prePathFromPath(e)+nameFromPath(e)).length;n>t&&(t=n)}),t}String.prototype.centerAnsi=function(e){let t=e-this.ansiLength()>>>1,n=" ".repeat(t)+this+" ".repeat(t);return" ".substr(0,e-n.ansiLength())+n},String.prototype.ansiLength=function(){return this.ansiFree().length},String.prototype.ansiFree=function(){return this.replace(/\x1b[^m]*m/g,"")};const help={};function parseHelp(e){if(e.length<4)log(),log("  Examples:"),log("    mdncomp arcTo                   show information for arcTo"),log("    mdncomp html*toblob.            will find HTMLCanvasElement.toBlob"),log("    mdncomp --list .                list all top-levels"),log("    mdncomp blob*der -o info.svg    export as svg"),log();else{let t="-h"===e[2].toLowerCase()||"--help"===e[2].toLowerCase()?e[3]:e[2],n=help[t];log(),log(`${ANSI.white}Help for option "${t}"${ANSI.reset}`),log(n||"Unknown option."),log()}}function init(){3===args.length&&"--configpath"===args[2]?log(ANSI.white+require("path").resolve(cfgPath,"mdncomp")+ANSI.reset):3!==args.length||"--update"!==args[2]&&"--fupdate"!==args[2]&&"--cupdate"!==args[2]?((options=require("commander")).version(version,"-v, --version").usage("[options] <feature>").description("Get MDN Browser Compatibility data."+lf+"  Version: "+version+lf+"  (c) 2018 epistemex.com").option("-l, --list","List paths starting with the given value or '.' for top-level").option("-o, --out <path>","Save information to file. Extension for type, or --type").option("-t, --type <type>","Output format (ansi, txt, svg)","ansi").option("-x, --overwrite","Overwrites an existing file with --out option").option("-d, --desktop","Show desktop only").option("-m, --mobile","Show mobile devices only").option("-c, --case-sensitive","Search in case-sensitive mode").option("-a, --all","If search results in more than entry, show info for all").option("-z, --fuzzy","Use path as a fuzzy search term").option("-i, --index <index>","Show this index from a multiple result list",-1).option("-s, --shorthand","Show compatibility as shorthand with multiple results").option("-h, --shorthand-split","Split a shorthand line into two lines (use with -s)").option("-b, --browser","Show information about this browser, or if '.' list").option("-N, --no-notes","Don't show notes").option("-e, --noteend","Show notes (-n) at end instead of in sections (text)").option("-f, --markdown","Format link as markdown and turns off colors").option("-w, --width <width>","Used with -o, Set width of image",800).option("--no-colors","Don't use colors in output").option("--max-chars <width>","Max number of chars per line before wrap",72).option("--doc","Show documentation. Show cached or fetch").option("--docforce","Show documentation. Force fetch from server").option("--mdn","Open entry's document URL in default browser").option("--random","Show a random entry. (mdncomp --random . )").option("--raw","Output the raw JSON data").option("--testurl","Test documentation URL and get status code").option("--update, --fupdate, --cupdate","Update BCD from remote (--fupdate=force, --cupdate=check)").option("--no-config","Ignore config file (mdncomp.json) in root folder").option("--configpath","Show path to where config file and cache is stored").action(go).on("--help",()=>{parseHelp(args)}).parse(args),options.args.length||options.help()):update("--fupdate"===args[2],"--cupdate"===args[2])}function outInfo(e){Array.isArray(e)&&(e=e.join(lf)),log(e+ANSI.reset)}function outStore(e,t){Array.isArray(e)&&(e=e.join(lf)),t||!options.out?log(e):saves.push(e)}function go(e){try{mdn=require("../data/data.json")}catch(e){return void log("Critical error: data file not found. Try running using option --fupdate to download latest snapshot.")}try{loadConfig()}catch(e){}if(options.out&&"ansi"===options.type&&(options.type=getExt(options.out||".txt")),options.desktop&&options.mobile&&(options.desktop=options.mobile=!1),options.colors&&!options.markdown&&"txt"!==options.type||Object.keys(ANSI).forEach(e=>{ANSI[e]=""}),options.random&&(e=randomCompat(),options.index=0),options.list)if("."===e)outInfo(listTopLevels());else if(["deprecated","experimental","standard"].indexOf(e)>=0)outInfo(listOnStatus(e));else if(["missinglink"].indexOf(e)>=0)outInfo(listOnProp(e));else{let t=list(e,options.caseSensitive);1===t.length&&isCompat(t[0])?(options.list=void 0,go(t[0])):outInfo(t)}else if(options.browser)"."===e?(outInfo(listBrowsers()),outInfo(lf+"Valid statuses:"),outInfo(ANSI.green+getBrowserStatusList().join(", "))):outInfo(listBrowser(e.toLowerCase()).join(lf));else{let n=search(e,options.caseSensitive);if(n.length)if(1===n.length||options.index>=0&&options.index<n.length||options.all&&("svg"!==options.type||options.raw)){if(options.shorthand&&(shortPad=getMaxLength(n)),options.index>=0&&options.index<n.length&&(n=n.splice(options.index,1)),n.forEach(e=>{!function(e){let t=new MDNComp(e);options.raw?outInfo(indent(JSON.stringify(getPathAsObject(t.path,!0)))):"svg"===options.type?outStore(compatToSVG(t)):outStore(options.shorthand?compatToShort(t,shortPad):compatToLong(t))}(e)}),1===n.length){let e=new MDNComp(n[0]);if(options.testurl&&!options.doc&&!options.docforce)if(e.url.length){let t=e.url.replace("mozilla.org/","mozilla.org/"+isoLang+"/");io.getUrlStatus(t,e=>{log(ANSI.white+"URL status: "+(200===e.statusCode?ANSI.green:ANSI.red)+e.statusCode+lf)},!0)}else log(ANSI.white+"URL status: "+ANSI.reset+"-- no link --"+lf);options.doc||options.docforce?e.url.length?getDoc(e.url,t):(outInfo(ANSI.red+"Documentation URL is not defined for this feature."+ANSI.reset+lf),t()):t(),options.mdn&&(e.url.length?io.run(e.url):log("No URL is defined for this entry."))}}else{let e=(n.length+"").length;n.forEach((t,n)=>{outInfo(ANSI.yellow+"["+ANSI.green+(n+"").padStart(e)+ANSI.yellow+"] "+ANSI.white+t+ANSI.reset)})}else outInfo("Not found.");function t(){"svg"!==options.type&&outStore(ANSI.magenta+"Data from MDN - `npm i -g mdncomp` by epistemex"+ANSI.white+lf+ANSI.reset),function(){let e;if(options.out&&saves.length)if((e=require("fs")).existsSync(options.out)&&!options.overwrite){const e=require("readline"),n=e.createInterface({input:process.stdin,output:process.stdout});n.question(ANSI.yellow+"A file exist with this name. Overwrite (y, default no)? "+ANSI.white,e=>{"y"===e.toLowerCase()||"yes"===e.toLowerCase()?t(function(){n.close()}):(log("File not saved."),n.close())})}else t();function t(t){e.writeFile(options.out,saves.join("\n"),"utf8",function(e){if(e)return log("An error occurred:"+lf+e);log('Saved output to file "'+options.out+'"!'),t&&t()})}}()}}}function loadConfig(){fs||(fs=require("fs")),path||(path=require("path"));const e=path.resolve(cfgPath,"mdncomp/mdncomp.json");let t=!1;fs.existsSync(cfgPath)||(log(),log(ANSI.red+"Could not detect user data area on this system for config file!"),log("Please report to: https://github.com/epistemex/mdncomp/issues"),log("and include the following data (replace username with just user):"),log("  Unresolved path: '"+cfgPath+"'"),log("  OS: '"+process.platform+"' + the path you would normally use for user data."),log("  APPDATA: "+process.env.APPDATA),log("  HOME: "+process.env.HOME),log(ANSI.reset),t=!0),fs.existsSync(e)&&(delete(cfg=require(e)).browser,delete cfg.list,delete cfg.out,delete cfg.all,delete cfg.index,delete cfg.random,Object.assign(options,cfg),t&&log(ANSI.red+"*** If you see this line please include with the above. ***"+ANSI.reset))}let https,fs,path;help["-v"]=help["--version"]="\nList version information for this release in semver format.",help["-l"]=help["--list"]='\nThis will list *branches* and not objects (unless they are branches as well).\nThis can help you navigate to a specific object in a branch.\n\nThere are currently 3 "special" branches:\n\n"." (a single dot) will list the top-level branches, the roots if you will:\n\n    mdncomp -l .\n    ->\n    api\n    css\n    html\n    http\n    javascript\n    webdriver\n    webextensions\n\nFrom there you can list all branches on for example "css":\n\n    mdncomp -l css\n    ->\n    css.at-rules\n    css.properties\n    css.selectors\n    css.types\n\nand so on.\n\n"experimental" will list all APIs and objects that are marked experimental:\n\n    mdncomp -l experimental\n    ->\n    api.AbortController\n    api.AbortSignal\n    api.Animation\n    api.AnimationEffectReadOnly\n    --X8--\n\n"deprecated" will list all APIs and objects that are obsolete or deprecated from the standard.',help["-o"]=help["--out"]='\nOutputs the results to a file. The extension of the file can currently be\n"txt", "ansi" or "svg" and will determine output *type* unless overridden\nby option `-t, --type` (see below).\n\nAny other extension will be considered text.\n\nIf a file with the same name already exists you will be prompted if you\nwant to override or not. This unless the "-x, --overwrite" option is used.\n\nExample:\n\n    mdncomp html*toblob. -o toBlob.svg\n\nOutputs the browser compatibility information for `toBlob` to file "toBlob.svg"\nas SVG graphics file.',help["-t"]=help["--type"]='\nWill dictate the file type to output to either STDOUT or to file when option\n"-o, --out" is used.\n\nThe following types are currently supported: "txt", "ansi", "svg".\nAny other type will default to "ansi".',help["-x"]=help["--overwrite"]="\nWhen outputting a file, using this option will override an existing file with the same name.",help["-d"]=help["--desktop"]="\nOnly show information about desktop browsers.",help["-m"]=help["--mobile"]="\nOnly show information about mobile device browsers.",help["-c"]=help["--case-sensitive"]="\nWhen searching determine that the search should be\nconducted using case-sensitive comparison. Default is case-insensitive.",help["-a"]=help["--all"]="\nIf there are multiple results for a search term, this will allow showing\ninformation for all the results.\n\nNote: currently not supported with SVG output.",help["-z"]=help["--fuzzy"]='\nSearch using a "fuzzy" search term. This simply mean expressing the search\nterm as chosen letters from the target path:\n\n    mndcomp -z htcetblb.\n\nwill produce the result for "HTMLCanvasElement.toBlob".\n\nThe option can be stored in the "config file" if you want to use it permanently.',help["-i"]=help["--index"]='\nWhen multiple results are listed they are assigned a index number in the\nresult list. To list one particular result from that list, use this option:\n\n    $ mdncomp blob\n    [0] api.Blob\n    [1] api.Blob.Blob\n    [2] api.Blob.size\n    [3] api.Blob.type\n    [4] api.Blob.slice\n    [5] api.BlobBuilder\n    [6] api.BlobEvent\n    --X8--\n\nTo list index 6, "api.BlobEvent" do:\n\n    $ mdncomp blob -i 6',help["-s"]=help["--shorthand"]="\nList a textual shorthand version of API information.\n\nFor example:\n\n    $ mdncomp blobbuilder -s\n    ->\n    BlobBuilder: DT: C:8 E:Y F:?-18* IE:10 O:- S:- MOB: CA:? FA:?-18* EM:Y OA:- Si:- WA:-",help["-h"]=help["--shorthand-split"]='\nUsed with the "-s, --shorthand" option to split a line into two. For example:\n\n    mdncomp blob -ash\n    ->\n    Blob:\n      DT: C:5 E:Y F:4 IE:10 O:11 S:5.1  MOB: CA:? FA:14 EM:Y OA:? Si:? WA:-\n    Blob.Blob:\n      DT: C:20 E:? F:13* IE:10 O:12 S:8  MOB: CA:? FA:14* EM:? OA:? Si:? WA:-\n    Blob.size:\n      DT: C:5 E:Y F:4 IE:10 O:11 S:5.1  MOB: CA:- FA:- EM:Y OA:- Si:- WA:-\n    --X8--',help["-b"]=help["--browser"]='\nThis will list release and status information for a *browser* based on the given ID.\n\nUsing "." (a single dot) will list all the currently valid IDs:\n\n    mdncomp --browser .\n    ->\n    chrome\n    edge\n    edge_mobile\n    firefox\n    firefox_android\n    ie\n    nodejs\n    opera\n    safari\n    safari_ios\n    samsunginternet_android\n\nThen pick an ID to obtain information about it:\n\n    mdncomp -b edge\n    ->\n    edge  12  Rel: 2015-07-15  retired\n    edge  13  Rel: 2015-11-05  retired\n    edge  14  Rel: 2016-08-02  retired\n    edge  15  Rel: 2017-04-11  retired\n    edge  16  Rel: 2017-09-26  current\n    edge  17  Rel: -           nightly\n\nYou can also get a list of browser bases on status. The following status keywords\nare supported:\n\n    current, retired, planned, beta, nightly, esr\n\nSo to list for example the current active browsers:\n\n    mdncomp --browser current\n    ->\n    chrome           65   Rel: 2018-03-06\n    edge             16   Rel: 2017-09-26\n    edge_mobile      16   Rel: -\n    firefox          57   Rel: 2017-11-14\n    firefox_android  57   Rel: 2017-11-28\n    ie               11   Rel: 2013-10-17\n    nodejs            4   Rel: 2015-09-08\n    --X8--',help["-N"]=help["--no-notes"]="\nDon't list footnotes with the information. A browser will still be marked\nhaving footnotes but with a generic astrix symbol instead.",help["-e"]=help["--noteend"]="\nFootnotes are collected and shown at the end when information about both\ndesktop and mobile are shown in the textual output.\n\nBy default footnotes are shown separately for each section.",help["-f"]=help["--markdown"]="\nFormats the MDN link as markdown in the textual output.",help["-w"]=help["--width"]="\nWidth in pixels for image output. Currently only used for SVG files.",help["--no-colors"]="\nTurns off ANSI colors and codes in the terminal.",help["--max-chars"]='\nSet max number of characters on a (textual) line. Default is 72 but if you\nprefer longer lines this can be set here. Using "-1" (negative one) as value \nmeans no line limit.',help["--doc"]='\nShow an excerpt from the official documentation for this feature.\n\nThe documentation is loaded from MDN server and parsed into text in the terminal.\nThe HTML excerpt is cached in the "[installation folder]/cached" with a MD5 as file\nname based on the URL.\n\nTo update cache either delete the folder, an entry or use the --docforce option',help["--docforce"]="\nSame as --doc but will force fetch the content, re-parse and update the cache.",help["--mdn"]="\nIf a documentation link is defined for the feature this option will attempt \nopening the link in the default browser.",help["--random"]="\nFeel like exploring? Discover new features using this option. Currently you need to specify\na root path as a single dot - if there is interest we'll might add random within a branch.\n\n    $ mdncomp --random .\n\nIt can be combined with documentation excerpts (if the URL for it is available):\n\n    $ mdncomp --random . --doc\n\nAs well as --mdn (opens browser for this feature if URL for it is available) etc.\n\nNote that some options are ignored using this option.",help["--raw"]='\nList raw JSON object output instead of formatted output.\n\nYou can combine this option with the "-a, --all" option.',help["--testurl"]="\nGet status code for the documentation URL if any is provided.\n\nThis is more useful to contributors that want to create pages for\nnon-existing pages (404) etc., or to see if there is temporary\nconnectivity issues.\n\nThe option is ignored if --doc or --docforce is specified.",help["--configpath"]="\nShow the path to the root folder used to store the optional config file and\nthe documentation excerpts cache.",help["--no-config"]="\nIgnores the config file if specified. As the config file will override options\nthis option will allow bypassing those overrides.\n\nOptions that will be ignored regardless are:\n--no-config, --out, --all, --index, --browser, --list,\n--version, --update, --cupdate, --fupdate and --help.",help["--update"]=help["--cupdate"]=help["--fupdate"]='\nUpdate the precompiled Browser Compatibility Data object. If the data is\nconsidered to be the same (using MD5 hash against server file) no data will\nbe downloaded.\n\nTo just check if there is new data use the check option "--cupdate".\n\nTo force update regardless if the data is the same you can use\nthe "--fupdate" variant.\n\nNo other options are allowed with the update options:\n\n    mdncomp --update\n    mdncomp --fupdate\n\n**NOTE:** Data is checked (MD5) and downloaded from the following GitHub repository:\n\n    https://github.com/epistemex/data-for-mdncomp\n\nwhich must be allowed through your firewall.\n\nTwo files in the root directory (this may change in the future) are loaded:\n\n    data.json\n    data.md5\n\nThese are saved locally to "[npm-install-folder]/mdncomp/data/".',help["-h"]=help["--help"]="\nList options, or show more detailed help per option (no options will default to `--help`):\n\n    mdncomp\n    mdncomp --help\n    mdncomp -h -l      # shows help for the --list option",module.exports.help=help;const io={request:function(e,t,n,o,r){function s(e,t){r?r({statusCode:e.statusCode,error:t}):log("Error",e,t)}https||(https=require("https")),t=t||function(){return!0},https.get(e,e=>{let i="";if(301===e.statusCode||302===e.statusCode)return this.request(e.headers.location,t,n,o,r);if(200===e.statusCode&&t({headers:e.headers})){let t=0|e.headers["content-length"];e.on("data",e=>{i+=e,n&&n(t?i.length/t:i.length%7/7)}).on("end",()=>{o(i)})}else r&&s(e,"")}).on("error",e=>s(res,e))},getUrlStatus:function(e,t,n){https||(https=require("https"));const{URL:o}=require("url"),r=new o(e),s={method:"HEAD",host:r.hostname,port:r.port,path:r.pathname};https.request(s,e=>{301===e.statusCode||302===e.statusCode?n?io.getUrlStatus(e.headers.location,t,n):t({statusCode:e.statusCode,location:e.headers.location}):t({statusCode:e.statusCode})}).end()},run:function(e){return require("opn")(e)},exist:function(e){return fs||(fs=require("fs")),fs.existsSync(e)},getCachedPath:function(e){path||(path=require("path")),fs||(fs=require("fs"));let t=path.resolve(cfgPath,"mdncomp");return fs.existsSync(t)||fs.mkdirSync(t),t=path.resolve(t,"cache"),fs||(fs=require("fs")),fs.existsSync(t)||fs.mkdirSync(t),path.resolve(t,calcMD5(e))},getCached:function(e){let t=null;try{t=fs.readFileSync(io.getCachedPath(e)).toString()}catch(e){}return t},setCached:function(e,t){try{fs.writeFileSync(io.getCachedPath(e),t)}catch(t){log(ANSI.red+"Could not save file: "+e+ANSI.reset+lf+t)}},writeAll:function(e,t){fs||(fs=require("fs"));let n=[],o=e.length,r=!1;for(let t of e)fs.writeFile(t.path,t.data,"utf8",e=>{s({path:t.path,err:e})});function s(e){n.push(e),e.err&&(r=!0),--o||t(n,r)}}};function update(e,t){const n=require("path"),o=ANSI.clrToCursor+ANSI.cursorUp,r=n.normalize(n.dirname(process.mainModule.filename)+"/../data/data."),s=r+"json",i=r+"md5";function a(){io.request(urlPrefix+"data.json",()=>!l(),e=>{let t=Math.round(50*e),n=50-t;log(o+ANSI.white+"Downloading data "+ANSI.white+"["+ANSI.green+"#".repeat(t)+" ".repeat(n)+ANSI.white+"]"+ANSI.reset+ANSI.black)},e=>{io.writeAll([{path:s,data:e},{path:i,data:calcMD5(e)}],(t,n)=>{n?t.forEach(e=>{e.err&&h("An error occurred writing data to file. Please retry: "+lf+e.path+": "+e.err+ANSI.reset)}):log(o+ANSI.white+("Updated with "+e.length+" bytes. All systems are GO!").padEnd(72," ")+ANSI.reset)})},e=>h(lf+"An error occurred -"+lf+"Status code: "+e.statusCode+(e.error?lf+"Message: "+e.error:"")+ANSI.reset))}function l(){log(o+"".padStart(72," "))}function h(e){log(o+ANSI.red+e+ANSI.white)}log("Connecting..."),e?a():serverMD5(e=>{let n=getCachedMD5(i,s);l(),log(o+ANSI.white+(e===n?"No change in data - cancelling (or use the --fupdate option).":"Update is available ("+e+").")),t||e===n||a()})}function serverMD5(e){io.request(urlPrefix+"data.md5",null,null,e,e=>{log("An error occurred:",e.statusCode,e.error)})}function getCachedMD5(e,t){fs||(fs=require("fs"));try{return fs.readFileSync(e)+""}catch(e){return calcFileMD5(t)}}function calcFileMD5(e){fs||(fs=require("fs"));try{return calcMD5(fs.readFileSync(e))+""}catch(e){return""}}function calcMD5(e){return crypto||(crypto=require("crypto")),crypto.createHash("md5").update(e).digest("hex")+""}function search(e,t){let n,o=buildTable(),r=[];function s(e){return t?e:e.toLowerCase()}return n=getComparer(s(e),options.fuzzy),o.forEach(e=>{let t=s(e);n.test(t)&&isCompat(e)&&r.push(e)}),r}function list(e,t){const n=t?e:e.toLowerCase(),o=buildTable(),r=[],s=n.split(".").length+1;let i,a="";o.forEach(e=>{(i=t?e:e.toLowerCase()).startsWith(n)&&e.split(".").length<=s&&e!==a&&r.push(a=e)});let l=e.lastIndexOf(".")+1;return r.forEach((e,t)=>{let n=e.lastIndexOf(".")+1;r[t]=ANSI.reset+(l?e.substr(0,l)+ANSI.cyan+(n>l?e.substring(l,n)+ANSI.white+e.substr(n):e.substr(l)):e)}),r}function listOnStatus(e){const t=[],n=listTopLevels();function o(t){return!!(t.__compat.status||{})[e]}"standard"===e&&(e="standard_track"),n.forEach(e=>{let n=mdn[e];n.__compat&&o(n)&&t.push(e),Object.keys(mdn[e]).forEach(n=>{let r=mdn[e][n];r.__compat&&o(r)&&t.push(e+"."+n),Object.keys(mdn[e][n]).forEach(r=>{let s=mdn[e][n][r];r.__compat&&o(s)&&t.push(e+"."+n+"."+r)})})});let r="deprecated"===e?ANSI.red:"experimental"===e?ANSI.yellow:ANSI.green;return t.forEach((e,n)=>{let o=e.lastIndexOf(".")+1;t[n]=ANSI.reset+e.substr(0,o)+r+e.substr(o)}),t.sort()}function listOnProp(e){const t=[];return buildTable().forEach(e=>{let n=getPathAsObject(e);n&&(!(n=n.__compat)||n.mdn_url&&n.mdn_url.length||t.push(e))}),t.forEach((e,n)=>{let o=e.lastIndexOf(".")+1;t[n]=(ANSI.reset+e.substr(0,o)+ANSI.white+e.substr(o)).replace(/\./g,ANSI.blue+"."+ANSI.reset)}),t.sort()}function listBrowser(e){const t=mdn.browsers[e],n=[];if(!t)return getBrowserStatusList().includes(e)?listBrowserOnStatus(e):"Unknown browser-id: '"+e+"' - Use '.' to list all valid IDs.";let o=0,r=0;return Object.keys(t.releases).forEach(e=>{let t=e.split(".");t[0].length>o&&(o=t[0].length),e.length-t[0].length>r&&(r=e.length-t[0].length)}),Object.keys(t.releases).sort(function(e,t){let n=e.split("."),o=t.split("."),r=(0|n[0])+.001*(0|n[1])+1e-6*(0|n[2])+1e-9*(0|n[3]),s=(0|o[0])+.001*(0|o[1])+1e-6*(0|o[2])+1e-9*(0|o[3]);return r>s?1:r<s?-1:0}).forEach(s=>{let i=ANSI.white+e+"  "+ANSI.green+_fBrowserVersion(s,o,r),a=t.releases[s].release_date,l=t.releases[s].status;i+=ANSI.white+"  Rel: "+(a?ANSI.cyan+a:ANSI.gray+"-         "),i+="  "+(l?_browserStatusColor(l)+l+ANSI.reset+ANSI.white:"-"),n.push(i+ANSI.white)}),n}function listBrowserOnStatus(e){let t=[],n=_browserStatusColor(e),o=_iterateBrowsers((t,n,o)=>{let r=t.release_date;return t.status&&t.status===e?{browser:n,version:o,date:r||"-"}:null}),r=0,s=0,i=0;return o.forEach(e=>{let t=e.version.split(".");e.browser.length>r&&(r=e.browser.length),t[0].length>s&&(s=t[0].length),e.version.length-t[0].length>i&&(i=e.version.length-t[0].length)}),t.push(ANSI.magenta+"STATUS: "+ANSI.reset+ANSI.white+n+e.toUpperCase()+ANSI.reset),o.forEach(e=>{t.push(ANSI.white+e.browser.padEnd(r)+ANSI.white+"  "+n+_fBrowserVersion(e.version,s,i)+ANSI.white+ANSI.dim+"  Rel: "+("-"===e.date?ANSI.gray:ANSI.reset+ANSI.bright+ANSI.cyan)+e.date+ANSI.reset)}),t}function getBrowserStatusList(){return _iterateBrowsers((e,t,n,o)=>o.includes(e.status)?null:e.status).sort()}function _browserStatusColor(e){return"retired"===e?ANSI.red:"beta"===e||"alpha"===e?ANSI.yellow:"nightly"===e?ANSI.blue:"current"===e||"esr"===e?ANSI.green:"planned"===e?ANSI.magenta:ANSI.white}function _iterateBrowsers(e){const t=mdn.browsers,n=[];return Object.keys(t).forEach(o=>{Object.keys(t[o].releases).forEach(r=>{let s=e(t[o].releases[r],o,r,n);s&&n.push(s)})}),n}function _fBrowserVersion(e,t,n){let o=e.split(".");return o[0].padStart(t)+o.join(".").substr(o[0].length).padEnd(n)}function getDoc(e,t){let n=ANSI.clrToCursor+ANSI.cursorUp,o=io.getCached(e);if(o&&!options.docforce)log(),l(o);else{log(ANSI.green+"Fetching documentation...");let o=e.replace("mozilla.org/","mozilla.org/"+isoLang+"/");function r(e,t){return e.substr(0,t-(t-e.lastIndexOf("<",t)))}io.request(o,()=>!i(),e=>{let t=Math.round(50*e),o=50-t;log(n+ANSI.white+"Downloading doc "+ANSI.white+"["+ANSI.green+"#".repeat(t)+" ".repeat(o)+ANSI.white+"]"+ANSI.reset+ANSI.black)},e=>{const t='<article id="wikiArticle">';let n,o=e.indexOf(t),s=e.indexOf("</article>",o+t.length);o<0||s<0?log(ANSI.red+"Warning: Could not parse the doc page."+ANSI.reset+lf):((n=(e=e.substring(o+t.length,s-1)).indexOf('id="Example'))>=0&&(e=r(e,n)),(n=e.indexOf('id="Browser_compatibility'))>=0&&(e=r(e,n)),(n=e.indexOf('id="Specification'))>=0&&(e=r(e,n)),a(e))},e=>{s=lf+"An error occurred -"+lf+"Status code: "+e.statusCode+(e.error?lf+"Message: "+e.error:"")+ANSI.reset,log(n+ANSI.red+s+ANSI.white),t()})}var s;function i(){log(n+"".padStart(options.maxChars," "))}function a(t){i(),log(ANSI.cursorUp+ANSI.cursorUp);let n=ANSI.reset+t,o="#LF#",r=!1,s=0,a=!1;const h=/=.*brush:\s?(html)/i,d=/.*class=.*optionalInline/i,c=/.*class=.*(experimental|deprecated)/i;function p(e,t,n){return t.test(e.substring(n.tagStart,n.tagEnd))}n="#"+(n=(n=(n=(n=(n=(n=(n=(n=(n=tagParser(n=n.replace(/\t/gm," "),e=>{switch(e.name){case"div":return p(n,c,e)&&(tagParser.skip=!0),"";case"/div":return r||(tagParser.skip=!1),"";case"span":return p(n,d,e)&&(a=!0),a?ANSI.white+" ("+ANSI.green:"";case"/span":let t="";return!r&&a&&(a=!1,t=ANSI.white+") "+ANSI.reset),t;case"table":return tagParser.skipLF=!0,ANSI.gray+"--LINE--"+ANSI.reset+o;case"/table":return tagParser.skipLF=!1,ANSI.gray+"--LINE--"+ANSI.reset+o;case"math":return tagParser.skip=!0,ANSI.blue+" --math formula not shown--"+ANSI.reset;case"/math":return tagParser.skip=!1,"";case"/th":case"/td":return"\t";case"/tr":return o;case"dl":case"ul":return tagParser.skipLF=!0,o;case"/dl":case"/ul":return tagParser.skipLF=!1,"";case"br":case"/p":return o;case"h2":case"h3":return o+ANSI.yellow;case"/h2":case"/h3":case"/dt":return ANSI.reset+o;case"/dd":case"/li":return s--,ANSI.reset+o;case"pre":return r=!0,p(n,h,e)&&(tagParser.skip=!0),tagParser.skip?"":ANSI.blue+"--LINE--"+ANSI.cyan+o;case"/pre":let i=tagParser.skip?"":o+ANSI.blue+"--LINE--"+ANSI.reset+o;return r=tagParser.skip=!1,i;case"code":return ANSI.cyan;case"/code":return ANSI.reset;case"dt":return ANSI.white+"*".repeat(Math.max(0,s+1))+ANSI.reset+" ";case"dd":case"li":return s++,ANSI.white+"-".repeat(Math.max(0,s))+ANSI.reset+" ";default:return""}},e=>r&&"\n"===e?o:e)).replace(/&nbsp;/gim," ")).replace(/&quot;/gim,'"')).replace(/&amp;/gim,"&")).replace(/&lt;/gim,"<")).replace(/&gt;/gim,">")).replace(/\n\s*\n/gim,"")).replace(new RegExp(o,"gm"),lf)).replace(lf+lf+ANSI.blue+"--LINE--",lf+ANSI.blue+"--LINE--")),io.setCached(e,n),l(n)}function l(e){if(!e.startsWith("#"))return void a(e);e=e.substr(1);let n="-".repeat(options.maxChars-1),o=(e=e.replace(/--LINE--/gm,n)).split(lf),r=-1;function s(t,n){let o="",r=e.indexOf(t),s=t.length;r>=0&&r<10&&(r=options.maxChars-s-2>>1,o=ANSI.red+"/".repeat(r-1)+n+" "+t.toUpperCase()+" "+ANSI.red+"/".repeat(r)+ANSI.reset+lf,e=o+e.substr(r+s+1))}e="",o.forEach((t,n)=>{let s=/\s\s+/g;if(r<0&&t.includes("\t")){let e,t;for(e=n;e<o.length&&(t=o[e]).includes("\t");e++)(t=t.split("\t")[0].trim()).length>r&&(r=t.length);r++}if(t.includes("\t")){let e=t.split("\t");t=ANSI.white+(e[0].trim().padEnd(r)+ANSI.reset+(e[1].trim()||"")),s="x79y"}else r>0&&(r=-1);e+=breakAnsiLine(t.replace(s," ").trim(),options.maxChars).trim()+lf}),s("Draft",ANSI.yellow),s("Obsolete",ANSI.red),outStore(e=ANSI.reset+e.trim()+lf),t()}}function tagParser(e,t,n){const o=0,r=1,s=2;let i,a=0,l=-1,h=o,d=!1,c="",p="";for(;a<e.length;)i=e[a],d?(h?(h===r&&'"'===i||h===s&&"'"===i)&&(h=o):'"'===i?h=r:"'"===i&&(h=s),h||((" "===i&&!c.length||">"===i&&!c.length)&&(c=e.substring(l+1,a)),">"===i&&(d=!1,p+=t({tagStart:l,tagEnd:a+1,name:c.toLowerCase()})))):"<"===i?(d=!0,l=a,c=""):(!tagParser.skipLF||"\n"!==i&&"\r"!==i||(i=""),tagParser.skip||(p+=n(i))),a++;return p}function randomCompat(){const e=buildTable();let t,n;for(;!t;)t=isCompat(e[n=Math.random()*e.length|0]);return e[n]}function compatToLong(e){let t=new Output(0),n=["chrome","edge","firefox","ie","opera","safari"],o=["chrome_android","edge_mobile","firefox_android","opera_android","safari_ios","webview_android"],r=["Â°","Â¹","Â²","Â³","Âª","^","`","'",'"',"'\"",'""','""\'',"Âº"],s=0,i=[],a=" %0----------+-----------+-----------+-----------+-----------+-----------";function l(n){n.forEach(n=>{let o,a=e.getBrowser(n);a?(o=a.info[0].getVersion(),a.hasNotes()&&(o+=ANSI.white+(options.notes?r[s]:"*"),i.push(a.getNotes(r[s])),s=++s%r.length),"?"===o&&(o=ANSI.yellow+"?")):o=ANSI.red+no,t.add("%0"+o.centerAnsi(11)+ANSI.white+"|",o.indexOf(no)>=0?ANSI.red:ANSI.cyan)}),t.trimEnd(1)}return t.addLine(ANSI.reset),options.markdown&&e.url.length?t.addLine(" [`%0%1`](%2) %3"+lf,e.prePath,e.name,e.url,e.getStatus()):(t.addLine(" %0%1%2%3%4 %5",ANSI.cyan,e.prePath,ANSI.white,e.name,ANSI.white,e.getStatus()),t.addLine(" ",e.url?ANSI.gray+e.url:"-",lf)),options.mobile||(t.addLine(" %0DESKTOP:",ANSI.yellow),t.addLine(" %0Chrome    %1|%0 Edge      %1|%0 Firefox   %1|%0 IE        %1|%0 Opera     %1|%0 Safari%1",ANSI.green,ANSI.white),t.addLine(a,ANSI.white),l(n),t.addLine(lf),!options.noteend&&options.notes&&i.length&&t.addLine(i.join("")),options.noteend||(i=[],s=0)),options.desktop||(t.addLine(" %0MOBILE:",ANSI.yellow),t.addLine(" %0Chrome/A  %1|%0 Edge/mob  %1|%0 Firefox/A %1|%0 Opera/A   %1|%0Safari/iOS | %0Webview/A%1",ANSI.green,ANSI.white),t.addLine(a,ANSI.white),l(o),t.addLine(lf),options.notes&&i.length&&t.addLine(i.join(""))),t.trimEnd(lf.length),t.toString()}function compatToShort(e,t){let n=e.prePath+e.name,o=new Output(0),r=["chrome","edge","firefox","ie","opera","safari"],s=["chrome_android","firefox_android","edge_mobile","opera_android","safari_ios","android"],i=["C:","E:","F:","IE:","O:","S:"],a=["CA:","FA:","EM:","OA:","Si:","WA:"];function l(t,n){t.forEach((t,r)=>{let s,i=e.getBrowser(t);i?(s=i.info[0].getVersion(),i.hasNotes()&&(s+=ANSI.white+"*")):s=ANSI.red+no,o.add(ANSI.green,n[r],ANSI.white,s," ")})}return o.add(ANSI.white),options.shorthandSplit?o.add(n,":",lf):o.add(n.padEnd(t),":"),options.mobile||(o.add("%0  DT: ",ANSI.cyan),l(r,i)),options.desktop||(o.add("%0 MOB: ",ANSI.cyan),l(s,a)),o.trimEnd(1),o.toString()}function compatToSVG(e){const t=new Output,n=["chrome","edge","firefox","ie","opera","safari"],o=["android","chrome,android","edge","firefox,android","opera,android","safari"],r=["Chrome","Edge","Firefox","IE","Opera","Safari"],s=["Webview for Android","Chrome for Android","Edge for mobile","Firefox for Android","Opera for Android","Safari for iOS"],i=["webview_android","chrome_android","edge_mobile","firefox_android","opera_android","safari_ios"],a={desktop:!options.mobile,mobile:!options.desktop,showNotes:!options.noNotes},l=options.width,h=a.mobile,d=a.desktop,c=l-0,p=h&&d?c/2+0:0,u=c/(h&&d?12:6),f=20,g="#E4F7E1",m="#FBE3E3",w=45;let S,b,A=[],I=0,N=1,y=50+2*w;for(t.add('<svg xmlns="http://www.w3.org/2000/svg" %1width="%0">',options.width,e.url.length?'xmlns:xlink="http://www.w3.org/1999/xlink" ':""),t.add("\x3c!-- Made by mdncomp v. "+version+" --\x3e"),(a.desktop||a.mobile)&&(L("chrome","M8.071 13.954l-4.579-7.931c2.932-3.671 7.445-6.023 12.508-6.023 5.857 0 10.978 3.148 13.767 7.844h-13.055c-0.235-0.020-0.472-0.031-0.711-0.031-3.809 0-7.018 2.614-7.929 6.142zM21.728 10.156h9.171c0.711 1.81 1.101 3.781 1.101 5.844 0 8.776-7.066 15.9-15.818 15.998l6.544-11.334c0.921-1.324 1.462-2.932 1.462-4.664 0-2.287-0.943-4.357-2.459-5.844zM10.188 16c0-3.205 2.607-5.813 5.813-5.813s5.813 2.607 5.813 5.813c0 3.205-2.608 5.813-5.813 5.813s-5.813-2.608-5.813-5.813zM18.193 23.889l-4.581 7.934c-7.704-1.153-13.613-7.797-13.613-15.822 0-2.851 0.746-5.526 2.053-7.845l6.532 11.314c1.308 2.785 4.14 4.718 7.415 4.718 0.759 0 1.495-0.104 2.193-0.299z"),L("firefox","M31.954 10.442l-0.371 2.377c0 0-0.53-4.402-1.179-6.047-0.995-2.521-1.438-2.501-1.441-2.498 0.667 1.694 0.546 2.604 0.546 2.604s-1.181-3.219-4.303-4.243c-3.459-1.134-5.33-0.824-5.547-0.765-0.033-0-0.064-0-0.095-0 0.026 0.002 0.050 0.005 0.076 0.007-0.001 0.001-0.003 0.001-0.003 0.002 0.014 0.017 3.822 0.666 4.497 1.594 0 0-1.617 0-3.227 0.464-0.073 0.021 5.923 0.749 7.148 6.74 0 0-0.657-1.371-1.47-1.604 0.535 1.626 0.397 4.712-0.112 6.245-0.066 0.197-0.133-0.853-1.135-1.305 0.321 2.301-0.019 5.952-1.616 6.957-0.124 0.078 1.001-3.603 0.226-2.18-4.46 6.838-9.731 3.155-12.101 1.535 1.215 0.264 3.52-0.041 4.541-0.8 0.001-0.001 0.002-0.002 0.004-0.003 1.108-0.758 1.765-1.311 2.354-1.18s0.982-0.46 0.524-0.985c-0.459-0.526-1.572-1.249-3.079-0.855-1.063 0.278-2.379 1.454-4.389 0.264-1.543-0.914-1.688-1.673-1.702-2.199 0.038-0.186 0.086-0.361 0.143-0.52 0.178-0.496 0.716-0.646 1.015-0.764 0.508 0.087 0.946 0.246 1.405 0.481 0.006-0.153 0.008-0.356-0.001-0.586 0.044-0.088 0.017-0.352-0.054-0.674-0.041-0.322-0.107-0.655-0.211-0.959 0-0 0.001-0 0.001-0 0.002-0.001 0.003-0.001 0.005-0.002s0.005-0.004 0.007-0.006c0-0.001 0.001-0.001 0.001-0.002 0.003-0.004 0.005-0.008 0.006-0.015 0.032-0.144 0.376-0.423 0.804-0.722 0.383-0.268 0.834-0.553 1.19-0.774 0.314-0.195 0.554-0.34 0.605-0.378 0.019-0.015 0.042-0.032 0.068-0.051 0.005-0.004 0.009-0.007 0.014-0.011 0.003-0.002 0.006-0.005 0.009-0.007 0.169-0.135 0.421-0.389 0.474-0.924 0-0.001 0-0.002 0-0.004 0.002-0.016 0.003-0.032 0.004-0.048 0.001-0.011 0.002-0.023 0.002-0.034 0-0.009 0.001-0.018 0.001-0.027 0.001-0.021 0.002-0.043 0.002-0.065 0-0.001 0-0.002 0-0.004 0.001-0.052-0-0.106-0.003-0.163-0.002-0.032-0.004-0.060-0.009-0.086-0-0.001-0.001-0.003-0.001-0.004-0.001-0.003-0.001-0.005-0.002-0.008-0.001-0.005-0.002-0.009-0.004-0.013-0-0.001-0-0.001-0.001-0.001-0.002-0.005-0.004-0.010-0.005-0.014-0-0-0-0-0-0.001-0.055-0.128-0.26-0.177-1.108-0.191-0.001-0-0.002-0-0.002-0v0c-0.346-0.006-0.798-0.006-1.391-0.004-1.039 0.004-1.613-1.016-1.797-1.41 0.251-1.389 0.977-2.379 2.17-3.051 0.023-0.013 0.018-0.023-0.009-0.031 0.233-0.141-2.82-0.004-4.225 1.782-1.247-0.31-2.333-0.289-3.269-0.069-0.18-0.005-0.404-0.027-0.67-0.083-0.623-0.564-1.514-1.606-1.562-2.85 0 0-0.003 0.002-0.008 0.006-0.001-0.012-0.002-0.024-0.002-0.036 0 0-1.897 1.458-1.613 5.434-0.001 0.064-0.002 0.125-0.004 0.184-0.514 0.696-0.768 1.282-0.787 1.411-0.455 0.926-0.917 2.32-1.292 4.437 0 0 0.263-0.833 0.79-1.777-0.388 1.188-0.693 3.036-0.514 5.808 0 0 0.047-0.615 0.215-1.5 0.131 1.719 0.704 3.841 2.152 6.337 2.78 4.791 7.052 7.211 11.775 7.582 0.839 0.069 1.689 0.071 2.544 0.006 0.079-0.006 0.157-0.011 0.236-0.018 0.968-0.068 1.942-0.214 2.914-0.449 13.287-3.212 11.842-19.256 11.842-19.256z"),L("edge","M0.481 14.206c0.938-7.4 5.987-14.113 15.037-14.206 5.463 0.106 9.956 2.581 12.631 7.3 1.344 2.462 1.762 5.050 1.85 7.906v3.356h-20.081c0.094 8.281 12.188 8 17.394 4.35v6.744c-3.050 1.831-9.969 3.469-15.325 1.363-4.563-1.712-7.813-6.488-7.794-11.081-0.15-5.956 2.962-9.9 7.794-12.144-1.025 1.269-1.806 2.669-2.213 5.094h11.338c0 0 0.663-6.775-6.419-6.775-6.675 0.231-11.488 4.112-14.213 8.094v0z"),L("opera","M32 16v0 0c0 4.738-2.063 9-5.337 11.925-4.106 2-7.931 0.6-9.194-0.275 4.031-0.881 7.075-5.756 7.075-11.65s-3.044-10.769-7.075-11.656c1.269-0.875 5.094-2.275 9.194-0.275 3.275 2.931 5.337 7.194 5.337 11.931v0 0z","M10.731 6.981c-1.769 2.087-2.912 5.175-2.987 8.644 0 0.006 0 0.744 0 0.756 0.075 3.462 1.225 6.55 2.994 8.637 2.294 2.981 5.706 4.869 9.519 4.869 2.344 0 4.538-0.712 6.413-1.956-2.837 2.531-6.575 4.069-10.669 4.069-0.256 0-0.512-0.006-0.762-0.019-8.481-0.4-15.238-7.4-15.238-15.981 0-8.838 7.162-16 16-16 0.019 0 0.038 0 0.063 0 4.075 0.013 7.787 1.55 10.606 4.075-1.875-1.244-4.069-1.962-6.413-1.962-3.813 0-7.225 1.887-9.525 4.869z"),L("ie","M22.944 19.651h7.377c0.057-0.512 0.080-1.034 0.080-1.569 0-2.507-0.673-4.858-1.848-6.883 1.215-3.228 1.172-5.968-0.455-7.606-1.547-1.54-5.697-1.29-10.388 0.787-0.347-0.026-0.697-0.040-1.051-0.040-6.439 0-11.841 4.431-13.335 10.402 2.020-2.586 4.145-4.461 6.984-5.826-0.258 0.242-1.764 1.739-2.018 1.993-7.486 7.484-9.847 17.26-7.306 19.8 1.931 1.93 5.43 1.604 9.449-0.364 1.869 0.952 3.984 1.488 6.226 1.488 6.035 0 11.15-3.885 13.003-9.295h-7.433c-1.023 1.887-3.023 3.171-5.319 3.171s-4.296-1.284-5.319-3.171c-0.455-0.852-0.716-1.83-0.716-2.864v-0.023h12.071zM10.884 16.025c0.171-3.035 2.694-5.456 5.774-5.456s5.604 2.421 5.774 5.456h-11.548zM28.030 5.119c1.048 1.059 1.021 3.007 0.125 5.438-1.535-2.341-3.766-4.186-6.4-5.239 2.816-1.207 5.106-1.367 6.274-0.199zM2.921 30.227c-1.337-1.337-0.934-4.144 0.788-7.526 1.072 3.008 3.161 5.534 5.854 7.161-2.982 1.354-5.423 1.584-6.643 0.365z"),L("safari","M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM3 16c0-7.18 5.82-13 13-13 3.424 0 6.538 1.325 8.86 3.488l-12.86 5.512-5.512 12.86c-2.164-2.322-3.488-5.436-3.488-8.86zM18.286 18.286l-8.003 3.43 3.43-8.003 4.573 4.573zM16 29c-3.424 0-6.539-1.325-8.86-3.488l12.86-5.512 5.512-12.86c2.164 2.322 3.488 5.436 3.488 8.86 0 7.18-5.82 13-13 13z")),a.desktop&&L("desktop","M0 2v20h32v-20h-32zM30 20h-28v-16h28v16zM21 24h-10l-1 4-2 2h16l-2-2z"),a.mobile&&(L("mobile","M24 0h-18c-1.1 0-2 0.9-2 2v28c0 1.1 0.9 2 2 2h18c1.1 0 2-0.9 2-2v-28c0-1.1-0.9-2-2-2zM15 30.556c-0.859 0-1.556-0.697-1.556-1.556s0.697-1.556 1.556-1.556 1.556 0.697 1.556 1.556-0.697 1.556-1.556 1.556zM24 26h-18v-22h18v22z"),L("android","M28 12c-1.1 0-2 0.9-2 2v8c0 1.1 0.9 2 2 2s2-0.9 2-2v-8c0-1.1-0.9-2-2-2zM4 12c-1.1 0-2 0.9-2 2v8c0 1.1 0.9 2 2 2s2-0.9 2-2v-8c0-1.1-0.9-2-2-2zM7 23c0 1.657 1.343 3 3 3v0 4c0 1.1 0.9 2 2 2s2-0.9 2-2v-4h4v4c0 1.1 0.9 2 2 2s2-0.9 2-2v-4c1.657 0 3-1.343 3-3v-11h-18v11z","M24.944 10c-0.304-2.746-1.844-5.119-4.051-6.551l1.001-2.001c0.247-0.494 0.047-1.095-0.447-1.342s-1.095-0.047-1.342 0.447l-1.004 2.009-0.261-0.104c-0.893-0.297-1.848-0.458-2.84-0.458s-1.947 0.161-2.84 0.458l-0.261 0.104-1.004-2.009c-0.247-0.494-0.848-0.694-1.342-0.447s-0.694 0.848-0.447 1.342l1.001 2.001c-2.207 1.433-3.747 3.805-4.051 6.551v1h17.944v-1h-0.056zM13 8c-0.552 0-1-0.448-1-1s0.447-0.999 0.998-1c0.001 0 0.002 0 0.003 0s0.001-0 0.002-0c0.551 0.001 0.998 0.448 0.998 1s-0.448 1-1 1zM19 8c-0.552 0-1-0.448-1-1s0.446-0.999 0.998-1c0 0 0.001 0 0.002 0s0.002-0 0.003-0c0.551 0.001 0.998 0.448 0.998 1s-0.448 1-1 1z")),e.hasFlags()&&L("flag","M0 0h4v32h-4v-32z","M26 20.094c2.582 0 4.83-0.625 6-1.547v-16c-1.17 0.922-3.418 1.547-6 1.547s-4.83-0.625-6-1.547v16c1.17 0.922 3.418 1.547 6 1.547z","M19 1.016c-1.466-0.623-3.61-1.016-6-1.016-3.012 0-5.635 0.625-7 1.547v16c1.365-0.922 3.988-1.547 7-1.547 2.39 0 4.534 0.393 6 1.016v-16z"),e.standard&&L("html5","M1.892 0l2.567 28.801 11.524 3.199 11.554-3.204 2.572-28.796h-28.216zM24.52 9.42h-13.517l0.322 3.617h12.874l-0.97 10.844-7.245 2.008-7.237-2.008-0.495-5.547h3.547l0.252 2.82 3.933 1.060 0.009-0.002 3.935-1.062 0.408-4.58h-12.242l-0.953-10.681h17.694l-0.316 3.532z"),e.deprecated&&L("thumb","M17 5c-0.755 0-1.438 0.289-1.965 0.751-0.064-0.062-0.116-0.14-0.188-0.192-0.96-0.737-3.665-1.559-5.847-1.559-1.879 0-2.607 0.293-3.252 0.552-0.103 0.042-0.207 0.085-0.316 0.124-0.834 0.305-1.578 1.229-1.738 2.2l-0.664 5.972c-0.174 1.039 0.441 2.127 1.4 2.478 0.394 0.144 2.512 0.405 3.883 0.56-0.215 1.256-0.312 2.405-0.312 3.616 0 1.379 1.121 2.5 2.5 2.5s2.5-1.121 2.5-2.5c0-1.875 0.667-2.737 1.616-3.699 0.548 0.724 1.408 1.199 2.384 1.199 1.653 0 2.999-1.347 2.999-3v-6c-0.001-1.656-1.346-3.002-3-3.002zM11 19.5c0 0.275-0.225 0.5-0.5 0.5s-0.5-0.225-0.5-0.5c0-1.805 0.256-3.241 0.479-4.293l0.297-1.398-1.321 0.188c-0.605-0.050-3.934-0.447-4.335-0.552-0.058-0.028-0.132-0.18-0.108-0.321l0.663-5.976c0.037-0.223 0.291-0.539 0.443-0.594 0.131-0.049 0.254-0.099 0.377-0.146 0.544-0.219 1.015-0.408 2.506-0.408 1.914 0 4.118 0.753 4.633 1.146 0.156 0.12 0.366 0.564 0.366 0.854v4.977c-0.001 0.026-0.040 0.649-0.707 1.316-0.913 0.913-2.293 2.293-2.293 5.207zM18 14c0 0.552-0.448 1-1 1s-1-0.448-1-1v-6c0-0.552 0.448-1 1-1s1 0.448 1 1v6z"),e.experimental&&L("lab","M29.884 25.14l-9.884-16.47v-6.671h1c0.55 0 1-0.45 1-1s-0.45-1-1-1h-10c-0.55 0-1 0.45-1 1s0.45 1 1 1h1v6.671l-9.884 16.47c-2.264 3.773-0.516 6.86 3.884 6.86h20c4.4 0 6.148-3.087 3.884-6.86zM7.532 20l6.468-10.779v-7.221h4v7.221l6.468 10.779h-16.935z"),e.url.length&&L("link","M6 2v24h24v-24h-24zM28 24h-20v-20h20v20zM4 28v-21l-2-2v25h25l-2-2h-21z","M11 8l5 5-6 6 3 3 6-6 5 5v-13z"),e.url.length?(t.add('<a xlink:href="%0" style="cursor:pointer" target="_blank">',e.url),C(e.prePath,e.name,1,46,26),k("link",l-28,26,24,24,"#777"),t.add("</a>")):C(e.prePath,e.name,f,50,32),e.deprecated&&v("thumb","Deprecated",24,"#a00"),e.experimental&&v("lab","Experimental",0,"#c70"),e.standard&&v("html5","On standard track",0,"#070"),t.add('<g transform="translate(0, 104)">'),O(0,0,l,y,"#eaedf2"),a.desktop&&x(n,r,0,50+w),a.mobile&&x(i,s,p,50+w),b=0;b<l;b+=u)E(0|b,50,0|b,y,1,"#999");if(h&&E(p,0,p,y,2),E(0,50,l,50,2),E(0,50+w,l,50+w,1),E(0,y,l,y,2),d)for(k("desktop",((h?c/2:c)-20)/2+0,15,20,20),S=0,b=0;S<n.length;S++)k(n[S],b+u*S+(u-20)/2,50+(w-20)/2,20,20,"#676769",r[S]);if(h)for(k("mobile",((d?c/2:c)-20)/2+p,15,20,20),S=0,b=p;S<o.length;S++){let e=o[S].split(",");e.forEach((t,n)=>{k(t,(2===e.length?n?1.5:-1.5:0)+b+20*n+u*S+(u-20*e.length)/2,50+(w-20)/2,20,20,"#676769",s[S])})}function x(t,n,o,r){options.maxWidth=(l-60)/8,t.forEach((t,n)=>{let s,i,a,h,d=e.getBrowser(t),c=o+u*n,p=c+.5*u;if(d){if(a=d.hasFlags(),h=d.hasPrefix(),s=d.info[0].getVersion().replace("Y",yes16),d.hasNotes()){i=options.notes?++I:"*";let e=d.getNotes(I);e=(e+"").ansiFree().replace(/</g,"&lt;").replace(/>/g,"&gt;"),A.push(e)}}else s=no;O(c,r,u,w,s.indexOf("-")>=0?m:"?"===s?"#eaedf2":g),"-"===s?M(no16,p,r+28,0,0,"#c55","middle"):M(s,p,r+28,l<800?12:0,0,s.indexOf("-")<0&&s.indexOf("?")<0?"#070":"#000","middle"),i&&M(i,c+u-12,r+13,10,"#000","end"),a&&k("flag",c+5,r+5,10,10,"#555"),h&&M(d.prefix,c+5,r+41,12,!1,"#334")})}function v(e,t,n,o){n=n||14;e&&(k(e,N,69+(14===n?2:1),n,n,o),N+=20),M(t,N,84,16,!0,o),N+=110}function E(e,n,o,r,s,i){s/2!=s>>>1&&(e+=.5,n+=.5,o+=.5,r+=.5),t.add('<line x1="%0" y1="%1" x2="%2" y2="%3"  stroke="%5" stroke-width="%4" />',e,n,o,r,s||1,i||"#000")}function O(e,n,o,r,s,i){t.add('<rect x="%0" y="%1" width="%2" height="%3" fill="%4"%5 />',e,n,o,r,s,i?' title="'+i+'"':"")}function M(e,n,o,r,s,i,a){a=a?' text-anchor="'+a+'" ':"",t.add('<text x="%1" y="%2" fill="%5" %6font-family="%4" font-size="%3">%0</text>',e,n,o,r||16,s?"sans-serif":"Consolas, monospace",i||"#000",a)}function C(e,n,o,r,s){t.add('<text x="%2" y="%3" font-family="Consolas, monospace" font-size="%4"><tspan fill="#777">%0</tspan><tspan fill="#000">%1</tspan>',e,n,o,r,s||16),t.add("</text>")}function k(e,n,o,r,s,i,a){i=i?' fill="'+i+'"':"",a&&t.add("<g><title>%0</title>",a),arguments.length>3?t.add('<use href="#icon-%0" x="%1" y="%2" width="%3" height="%4"%5></use>',e,n,o,r,s,i):t.add('<use href="#icon-%0" width="%1" height="%2"%3></use>',e,n,o,i),a&&t.add("</g>")}function L(e,n){t.add('<symbol id="icon-%0" viewBox="-1 -1 34 34">',e);for(let e=1;e<arguments.length;e++)t.add('<path d="%0"></path>',arguments[e]);t.add("</symbol>")}return options.notes&&A.length&&(y+=16,A.forEach(e=>{!function(e){let t=e.split(lf),n=new Output;t.forEach(e=>{n.add('<tspan x="%0" dy="1.3em">',f),n.add(e),n.add("</tspan>")}),M(n.toString(),10,y,14),y+=15*t.length}(e)})),M('Data from MDN - "npm i -g mdncomp" by epistemex Â© 2018.',1,y+=45,14,!0,"#777"),t.add("</g></svg>"),t.toString()}function MDNComp(e){let t=getPathAsObject(e).__compat,n=["webview_android","chrome","chrome_android","edge","edge_mobile","firefox","firefox_android","ie","opera","opera_android","safari","safari_ios"],o=[!1,!0,!1,!0,!1,!0,!1,!0,!0,!1,!0,!1],r=t.status||{},s=Object.keys(t.support);this.path=e,this.prePath=prePathFromPath(e),this.name=nameFromPath(e),this.url=t.mdn_url||"",this.experimental=r.experimental,this.standard=r.standard_track,this.deprecated=r.deprecated,this.browsers=[],this.description=t.description,s.forEach(e=>{let r=n.indexOf(e);if(r>=0){let n=new Browser(t,e);n.isDesktop=o[r],this.browsers.push(n)}})}function Info(e){this.added=this.toStatus(e.version_added),this.removed=this.toStatus(e.version_removed),this.notes=e.notes?Array.isArray(e.notes)?e.notes:[e.notes]:[],this.flags=e.flags||[],e.prefix&&this.notes.unshift("Prefix: "+e.prefix),e.partial_implementation&&this.notes.unshift("Is partial implementation."),e.alternative_name&&this.notes.unshift("Uses a non-standard name: "+e.alternative_name),this.flags.forEach(e=>{this.notes.push(this.flagToString(e))})}function Browser(e,t){this.name=t,this.info=[];let n=e.support[t];Array.isArray(n)||(n=[n]),this.prefix=(n[n.length-1]||{}).prefix||"",n.forEach(e=>{this.info.push(new Info(e))})}function Output(e){this.string="",this.indent="    ".substr(0,0|e),this.linefeed=lf}tagParser.skip=!1,tagParser.skipLF=!1,MDNComp.prototype={getBrowser:function(e){for(let t of this.browsers)if(t.name===e)return t;return null},getStatus:function(){let e="(";return this.experimental&&(e+=ANSI.yellow+"EXPERIMENTAL"+ANSI.reset+", "),this.deprecated&&(e+=ANSI.red+"DEPRECATED"+ANSI.reset+", "),!this.standard||this.deprecated||this.experimental||(e+=ANSI.green+"On Standard Track"+ANSI.reset+", "),"()"===(e=e.substr(0,Math.max(1,e.length-2))+")")?"":e},hasFlags:function(){for(let e of this.browsers)if(e.hasFlags())return!0;return!1}},Info.prototype={getVersion:function(){return this.removed?this.added+"-"+this.removed.replace("Y","?"):this.added},flagToString:function(e){switch(e.type){case"preference":return t("Behind flag "+ANSI.cyan);case"compile_flag":return t("Compile with "+ANSI.cyan);case"runtime_flag":return t("Run with "+ANSI.cyan)}function t(t){return t+e.name+ANSI.white+(e.value_to_set?" set to "+e.value_to_set:"")+"."}return""},toString:function(e){let t=(e?e+") ":"")+(isNaN(this.added)?"":this.getVersion()+": "),n="",o=new Output(0);return this.notes.length?(this.notes.length>1&&(t+=lf,n="- "),this.notes.forEach(e=>{o.addLine(cleanHTML(n+e,!0))}),t+o.toString()):""},toStatus:function(e){return"boolean"==typeof e?e?"Y":no:null===e?"?":e||null}},Browser.prototype={hasNotes:function(){for(let e of this.info)if(e.notes.length)return!0;return!1},hasFlags:function(){for(let e of this.info)if(e.flags.length)return!0;return!1},hasPrefix:function(){return this.prefix.length},getNotes:function(e){let t=new Output(0);return this.info.forEach(n=>{let o=breakAnsiLine(n.toString(e),options.maxChars);o.length&&t.addLine(o)}),t.toString()}},Output.prototype={add:function(e){if(e=e||"",arguments.length>1){let t=e.indexOf("%0")>=0;for(let n=1;n<arguments.length;n++){let o=new RegExp("%"+(n-1),"g");e=t?e.replace(o,arguments[n]):e+arguments[n]}}this.string+=this.indent+(e||"")},addLine:function(e){this.add.apply(this,arguments),this.string+=this.linefeed},trimEnd:function(e){this.string=this.string.substr(0,Math.max(0,this.string.length-e))},replace:function(e,t){let n=new RegExp(e,"g");this.string=this.string.replace(n,t)},toString:function(){return this.string}};