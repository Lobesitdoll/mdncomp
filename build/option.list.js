const utils=loadModule("core.utils"),mdn=utils.loadMDN();function list(t,e=!1){if("string"==typeof t&&t.length&&"."!==t)if(["deprecated","experimental","standard"].includes(t)){const s=listOnStatus(t,e);s.length>1?n(s):log(s)}else{let s=listAPI(t,e);1===s.length&&utils.isCompat(mdn,s[0])?(options.list=void 0,listAPI(s[0])):s.length>1&&n(s)}else log(`?R${text.valid} ${text.pathRoots}:`),log(`?g${utils.listTopLevels(mdn).join(lf)}?R`),log(lf+`${text.valid} ${text.statuses}:`),log("?gstandard, experimental, deprecated?R");function n(t){if(options.index>-1){if(options.index<0||options.index>=t.length)return void err(errText.indexOutOfRange);let e=t[options.index].split(" "),n=e[e.length-1].replace(/\?./g,"");options.index=-1,list(n,!0)}else log(t)}}function listAPI(t,e=!1){const n=options.caseSensitive?t:t.toLowerCase(),s=utils.buildTable(mdn),l=n.split(".").length+1;let i="";return s.filter(t=>{if((options.caseSensitive?t:t.toLowerCase()).startsWith(n)&&t.split(".").length<=l&&t!==i)return i=t}).sort().map((t,n,s)=>{const l=utils.getPathAsObject(mdn,t);let i="",o="?GB?R";l.__compat?(i="?c",o="F"):utils.hasChildren(l)&&(i="?g",o="P");const a=e?"":"?y[?g"+(n+"").padStart((s.length+"").length)+"?y]?R ";if(i.length){const e=t.split(".");return e[e.length-1]=i+e[e.length-1]+"?R",`${a}${i}${o}?R ${e.join(".")}`}return`${a}${o} ${t}`})}function listOnStatus(t,e=!1){const n=[],s=utils.listTopLevels(mdn);function l(e){return!!(e.__compat.status||{})[t]}"standard"===t&&(t+="_track"),s.forEach(t=>{let e=mdn[t];e.__compat&&l(e)&&n.push(t),Object.keys(mdn[t]).forEach(e=>{let s=mdn[t][e];s.__compat&&l(s)&&n.push(t+"."+e),Object.keys(mdn[t][e]).forEach(s=>{let i=mdn[t][e][s];s.__compat&&l(i)&&n.push(t+"."+e+"."+s)})})});const i="deprecated"===t?"?o":"experimental"===t?"?y":"?g";return n.sort().map((t,n,s)=>{const l=e?"":"?y[?g"+(n+"").padStart((s.length+"").length)+"?y]?R ",o=t.lastIndexOf(".")+1;return`?R${l}${t.substr(0,o)+i+t.substr(o)}`})}module.exports=list;