#!/usr/bin/env node
const DEBUG=!0,_base="../src/",_outBuffer=[];Object.assign(global,{DEBUG:!0,_base:_base,lf:"\r\n",sepChar:"|",shortPad:1,lang:"en-US",ANSI:require(_base+"core.ansi"),options:{},loadMDN:loadMDN,outInfo:outInfo,outStore:outStore});const options=global.options=require(_base+"init.options");function loadMDN(){let o;try{o=require("../data/data.json")}catch(o){log("Critical error: data file not found. Try running with option --fupdate to download latest snapshot."),process.exit(1)}return o}function outInfo(o){Array.isArray(o)&&(o=o.join(lf)),console.log(o+ANSI.reset)}function outStore(o,t){Array.isArray(o)&&(o=o.join(lf)),t||!options.out?console.log(o):_outBuffer.push(o)}function getExt(o){if("string"!=typeof o)return"";let t=o.lastIndexOf(".");return t<0?"":o.substr(++t)}options.colors&&!options.markdown&&".txt"!==getExt(options.out)||Object.keys(global.ANSI).filter(o=>!o.includes("ursor")).forEach(o=>ANSI[o]=""),options.update?require(_base+"core.update")(!1,!1):options.cupdate?require(_base+"core.update")(!1,!0):options.fupdate?require(_base+"core.update")(!0,!1):options.browser?require(_base+"option.browser")(options.browser):options.list?require(_base+"option.list")(options.list):options.args.length?console.log("todo search:",options.args):options.help();