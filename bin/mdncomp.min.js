#!/usr/bin/env node
const DEBUG=!0,text={mdncomp:"mdncomp i -g mdncomp"},errText={versionWarning:"WARNING: mdncomp is built for Node version 8 or newer. It may not work in older Node.js versions.",missingModule:String.raw`Critical: A core module seem to be missing. Use '${text.mdncomp}' to reinstall.`,unhandled:"An unhandled error occurred!\nPlease consider reporting to help us solve it via GitLab:\n  https://gitlab.com/epistemex/mdncomp/issues\nTry reinstalling 'npm i -g mdncomp' (or update) if the issue persists."};+process.versions.node.split(".")[0]<8&&console.log(errText.versionWarning);const _errHandler=o=>{console.log(errText.unhandled,o),process.exit(1)};process.on("error",_errHandler),process.on("uncaughtException",_errHandler);const _base=`../${DEBUG?"src":"build"}/`,utils=loadModule("core.utils");Object.assign(global,{DEBUG:DEBUG,_base:_base,lf:"\r\n",sepChar:"|",shortPad:1,lang:"en-US",ANSI:loadModule("core.ansi"),options:{}});const options=global.options=loadModule("init.options");function loadModule(o){let e;try{e=require(_base+o)}catch(o){console.log(errText.missingModule),DEBUG&&console.log("ERROR OBJECT:",o),process.exit(1)}return e}options.colors&&!options.markdown&&".txt"!==utils.getExt(options.out)||Object.keys(global.ANSI).filter(o=>!o.includes("ursor")).forEach(o=>ANSI[o]=""),options.update?loadModule("core.update")(!1,!1):options.cupdate?loadModule("core.update")(!1,!0):options.fupdate?loadModule("core.update")(!0,!1):options.browser?loadModule("option.browser")(options.browser):options.list?loadModule("option.list")(options.list):options.args.length?console.log(loadModule("option.search")(options.args[0])):options.help();